<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pocket Rehab: Relapse Edition</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>
    <!-- Background Container -->
    <div id="background-container" class="background">
        <img id="bg-image" src="assets/backgrounds/bg_main_alley.png" alt="Toxic Alley Background">
    </div>

    <!-- Game Container -->
    <div id="game-container">

        <!-- Header -->
        <header class="game-header">
            <h1 class="game-title">POCKET REHAB: <span class="relapse">RELAPSE EDITION</span></h1>
        </header>

        <!-- Main Game Area -->
        <div class="game-main">

            <!-- Left Side - Tolerance Meter -->
            <div class="left-panel">
                <div id="vomit-button" class="vomit-btn">xVOMIT</div>
                <div class="tolerance-meter">
                    <img src="assets/ui/ui_meter_glass.png" alt="Tolerance Meter" class="meter-glass">
                    <div id="meter-fill" class="meter-fill"></div>
                    <div id="meter-bubbles" class="meter-bubbles"></div>
                </div>
                <div class="meter-label">TOLERANCE<br>METER</div>
            </div>

            <!-- Center - Game Grid -->
            <div class="game-grid-container">
                <img src="assets/ui/ui_container_grid_6x5.png" alt="Grid Frame" class="grid-frame">
                <div id="game-grid" class="game-grid">
                    <!-- 6x5 Grid - 30 cells -->
                    <!-- Generated dynamically by JS -->
                </div>
            </div>

            <!-- Right Side - Info Panel (Optional) -->
            <div class="right-panel">
                <!-- Can add info or effects here -->
            </div>
        </div>

        <!-- Bottom Control Panel -->
        <div class="control-panel">
            <img src="assets/ui/ui_panel_betwin.png" alt="Control Panel" class="panel-bg">

            <div class="controls-wrapper">
                <!-- Info Button -->
                <button id="info-btn" class="control-btn info-btn">i</button>

                <!-- Balance Display -->
                <div class="balance-container">
                    <div class="label">BALANCE:</div>
                    <div id="balance" class="value">5000</div>
                </div>

                <!-- Bet Button -->
                <button id="bet-btn" class="control-btn bet-btn">BET</button>

                <!-- Spin Button -->
                <button id="spin-btn" class="spin-button">
                    <img src="assets/ui/ui_btn_spin.png" alt="Spin">
                    <span class="spin-text">SPIN</span>
                </button>

                <!-- Win Display -->
                <div class="win-container">
                    <div class="label">WIN:</div>
                    <div id="win-amount" class="value">0</div>
                </div>
            </div>
        </div>

        <!-- Footer Warning -->
        <footer class="game-footer">
            MATURE CONTENT - 18+ ONLY - DARK HUMOR INSIDE
        </footer>
    </div>

    <!-- Bonus Buy Menu (Hidden by default) -->
    <div id="bonus-buy-menu" class="bonus-menu hidden">
        <img src="assets/ui/ui_panel_bonusbuy.png" alt="Bonus Buy Menu" class="menu-bg">
        <div class="menu-content">
            <h2>BONUS BUY</h2>
            <button class="bonus-option" data-cost="100" data-type="catch">
                <span class="bonus-name">Catch 'Em... If You Can</span>
                <span class="bonus-cost">100x Bet</span>
            </button>
            <button class="bonus-option" data-cost="200" data-type="beatdown">
                <span class="bonus-name">Alleyway Beatdown</span>
                <span class="bonus-cost">200x Bet</span>
            </button>
            <button class="bonus-option" data-cost="500" data-type="detox">
                <span class="bonus-name">Detox Ward (Free Spins)</span>
                <span class="bonus-cost">500x Bet</span>
            </button>
            <button id="close-bonus-menu" class="close-btn">CLOSE</button>
        </div>
    </div>

    <!-- Bonus Game Screens -->
    <div id="bonus-catch" class="bonus-screen hidden">
        <img src="assets/backgrounds/bg_bonus_field.png" alt="Catch Em Background" class="bonus-bg">
        <div class="bonus-content">
            <h2>CATCH 'EM... IF YOU CAN</h2>
            <div class="bonus-stats">
                <div>Lives: <span id="catch-lives">3</span></div>
                <div>Total Win: <span id="catch-win">0</span></div>
            </div>
            <div id="catch-reels" class="catch-reels">
                <div class="catch-reel">
                    <div class="reel-label">WEAPON</div>
                    <div id="weapon-reel" class="reel-symbol"></div>
                </div>
                <div class="catch-reel">
                    <div class="reel-label">POWER</div>
                    <div id="power-reel" class="reel-symbol"></div>
                </div>
                <div class="catch-reel">
                    <div class="reel-label">ACCURACY</div>
                    <div id="accuracy-reel" class="reel-symbol"></div>
                </div>
            </div>
            <button id="catch-spin" class="bonus-spin-btn">THROW</button>
            <button id="catch-exit" class="bonus-exit-btn">EXIT</button>
        </div>
    </div>

    <div id="bonus-beatdown" class="bonus-screen hidden">
        <img src="assets/backgrounds/bg_bonus_cage.png" alt="Fight Club Background" class="bonus-bg">
        <div class="bonus-content">
            <h2>ALLEYWAY BEATDOWN</h2>
            <div class="boss-container">
                <div class="boss-info">
                    <div>Boss HP: <span id="boss-hp">100</span></div>
                    <div class="boss-hp-bar">
                        <div id="boss-hp-fill" class="hp-fill"></div>
                    </div>
                </div>
                <div id="boss-sprite" class="boss-sprite"></div>
            </div>
            <div class="bonus-stats">
                <div>Spins Left: <span id="beatdown-spins">5</span></div>
                <div>Total Win: <span id="beatdown-win">0</span></div>
            </div>
            <div id="beatdown-result" class="beatdown-result"></div>
            <button id="beatdown-spin" class="bonus-spin-btn">FIGHT</button>
            <button id="beatdown-exit" class="bonus-exit-btn">EXIT</button>
        </div>
    </div>

    <!-- Win Popup -->
    <div id="win-popup" class="win-popup hidden">
        <div class="win-popup-content">
            <h2>BIG WIN!</h2>
            <div id="popup-win-amount" class="popup-amount">0</div>
            <button id="close-popup" class="popup-close-btn">COLLECT</button>
        </div>
    </div>

    <!-- Settings Menu -->
    <div id="settings-menu" class="modal-overlay hidden">
        <div class="modal-content settings-modal">
            <h2>‚öôÔ∏è SETTINGS</h2>

            <!-- Auto-Play Section -->
            <div class="settings-section">
                <h3>AUTO-PLAY</h3>
                <div class="setting-row">
                    <label>Number of Spins:</label>
                    <select id="autoplay-spins">
                        <option value="10">10 Spins</option>
                        <option value="25">25 Spins</option>
                        <option value="50">50 Spins</option>
                        <option value="100">100 Spins</option>
                        <option value="250">250 Spins</option>
                        <option value="500">500 Spins</option>
                    </select>
                </div>
                <div class="setting-row">
                    <label>
                        <input type="checkbox" id="autoplay-stop-win" class="checkbox">
                        Stop on Any Win
                    </label>
                </div>
                <div class="setting-row">
                    <label>
                        <input type="checkbox" id="autoplay-stop-bigwin" class="checkbox">
                        Stop on Big Win (10x+)
                    </label>
                </div>
                <div class="setting-row">
                    <label>
                        <input type="checkbox" id="autoplay-stop-bonus" class="checkbox">
                        Stop on Bonus Trigger
                    </label>
                </div>
                <div class="setting-row">
                    <label>Stop Loss:</label>
                    <input type="number" id="autoplay-stoploss" placeholder="0" min="0" step="100">
                </div>
                <div class="setting-row">
                    <label>Stop on Win:</label>
                    <input type="number" id="autoplay-stopwin" placeholder="0" min="0" step="100">
                </div>
                <button id="start-autoplay" class="action-btn green">START AUTO-PLAY</button>
                <button id="stop-autoplay" class="action-btn red">STOP AUTO-PLAY</button>
                <div id="autoplay-status" class="status-display">Status: Inactive</div>
            </div>

            <!-- Sound Settings -->
            <div class="settings-section">
                <h3>SOUND</h3>
                <div class="setting-row">
                    <label>Master Volume:</label>
                    <input type="range" id="master-volume" min="0" max="100" value="70">
                    <span id="volume-value">70%</span>
                </div>
                <div class="setting-row">
                    <label>
                        <input type="checkbox" id="sound-effects" class="checkbox" checked>
                        Sound Effects
                    </label>
                </div>
                <div class="setting-row">
                    <label>
                        <input type="checkbox" id="background-music" class="checkbox" checked>
                        Background Music
                    </label>
                </div>
            </div>

            <!-- Game Options -->
            <div class="settings-section">
                <h3>GAME OPTIONS</h3>
                <div class="setting-row">
                    <label>
                        <input type="checkbox" id="turbo-mode" class="checkbox">
                        üöÄ Turbo Mode (Faster Spins)
                    </label>
                </div>
                <div class="setting-row">
                    <label>
                        <input type="checkbox" id="quick-spin" class="checkbox">
                        ‚ö° Quick Spin (Skip Animations)
                    </label>
                </div>
                <div class="setting-row">
                    <label>
                        <input type="checkbox" id="show-stats" class="checkbox" checked>
                        üìä Show Statistics
                    </label>
                </div>
            </div>

            <!-- Save/Load -->
            <div class="settings-section">
                <h3>SAVE / LOAD</h3>
                <button id="save-game" class="action-btn blue">üíæ SAVE GAME</button>
                <button id="load-game" class="action-btn blue">üìÅ LOAD GAME</button>
                <button id="reset-game" class="action-btn red">üîÑ RESET GAME</button>
                <div id="save-status" class="status-display"></div>
            </div>

            <button id="close-settings" class="modal-close-btn">CLOSE</button>
        </div>
    </div>

    <!-- Bet Selector Modal -->
    <div id="bet-selector" class="modal-overlay hidden">
        <div class="modal-content bet-modal">
            <h2>SELECT BET AMOUNT</h2>
            <div class="bet-grid">
                <button class="bet-option" data-bet="1">$1</button>
                <button class="bet-option" data-bet="2">$2</button>
                <button class="bet-option" data-bet="5">$5</button>
                <button class="bet-option" data-bet="10">$10</button>
                <button class="bet-option" data-bet="20">$20</button>
                <button class="bet-option" data-bet="50">$50</button>
                <button class="bet-option" data-bet="100">$100</button>
            </div>
            <div class="current-bet-display">
                Current Bet: $<span id="current-bet-value">1</span>
            </div>
            <button id="close-bet-selector" class="modal-close-btn">CLOSE</button>
        </div>
    </div>

    <!-- Paytable/Info Modal -->
    <div id="paytable-modal" class="modal-overlay hidden">
        <div class="modal-content paytable-modal">
            <h2>üìñ PAYTABLE & RULES</h2>

            <div class="paytable-section">
                <h3>HIGH PAY SYMBOLS</h3>
                <div class="symbol-grid">
                    <div class="paytable-item">
                        <img src="assets/characters/char_high_sparky.png" alt="Sparky">
                        <div class="symbol-name">SPARKY</div>
                        <div class="symbol-pays">
                            8+ = 10x | 10+ = 20x<br>
                            12+ = 50x | 15+ = 100x<br>
                            20+ = 500x
                        </div>
                    </div>
                    <div class="paytable-item">
                        <img src="assets/characters/char_high_zippo.png" alt="Zippo">
                        <div class="symbol-name">ZIPPO</div>
                        <div class="symbol-pays">
                            8+ = 10x | 10+ = 20x<br>
                            12+ = 50x | 15+ = 100x<br>
                            20+ = 500x
                        </div>
                    </div>
                    <div class="paytable-item">
                        <img src="assets/characters/char_high_squirt.png" alt="Squirt">
                        <div class="symbol-name">SQUIRT</div>
                        <div class="symbol-pays">
                            8+ = 10x | 10+ = 20x<br>
                            12+ = 50x | 15+ = 100x<br>
                            20+ = 500x
                        </div>
                    </div>
                </div>
            </div>

            <div class="paytable-section">
                <h3>LOW PAY SYMBOLS</h3>
                <div class="symbol-grid compact">
                    <div class="paytable-item small">
                        <img src="assets/symbols/sym_low_fish.png" alt="Fish">
                        <div class="symbol-name">FISH</div>
                        <div class="symbol-pays">8+=2x | 12+=10x | 20+=50x</div>
                    </div>
                    <div class="paytable-item small">
                        <img src="assets/symbols/sym_low_finger.png" alt="Finger">
                        <div class="symbol-name">FINGER</div>
                        <div class="symbol-pays">8+=2x | 12+=10x | 20+=50x</div>
                    </div>
                    <div class="paytable-item small">
                        <img src="assets/symbols/sym_low_needle.png" alt="Needle">
                        <div class="symbol-name">NEEDLE</div>
                        <div class="symbol-pays">8+=2x | 12+=10x | 20+=50x</div>
                    </div>
                    <div class="paytable-item small">
                        <img src="assets/symbols/sym_low_baggie.png" alt="Baggie">
                        <div class="symbol-name">BAGGIE</div>
                        <div class="symbol-pays">8+=2x | 12+=10x | 20+=50x</div>
                    </div>
                    <div class="paytable-item small">
                        <img src="assets/symbols/sym_low_pills.png" alt="Pills">
                        <div class="symbol-name">PILLS</div>
                        <div class="symbol-pays">8+=2x | 12+=10x | 20+=50x</div>
                    </div>
                    <div class="paytable-item small">
                        <img src="assets/symbols/sym_low_can.png" alt="Can">
                        <div class="symbol-name">CAN</div>
                        <div class="symbol-pays">8+=2x | 12+=10x | 20+=50x</div>
                    </div>
                </div>
            </div>

            <div class="paytable-section">
                <h3>SPECIAL SYMBOLS</h3>
                <div class="symbol-grid">
                    <div class="paytable-item">
                        <img src="assets/specials/sym_special_wild.png" alt="Wild">
                        <div class="symbol-name">WILD</div>
                        <div class="symbol-pays">Substitutes for all symbols except Scatter</div>
                    </div>
                    <div class="paytable-item">
                        <img src="assets/specials/sym_special_scatter.png" alt="Scatter">
                        <div class="symbol-name">SCATTER</div>
                        <div class="symbol-pays">
                            3+ = Catch 'Em Bonus<br>
                            4+ = Alleyway Beatdown<br>
                            5+ = Detox Ward Free Spins
                        </div>
                    </div>
                    <div class="paytable-item">
                        <img src="assets/specials/sym_special_multiplier.png" alt="Multiplier">
                        <div class="symbol-name">MULTIPLIER</div>
                        <div class="symbol-pays">Doubles all wins in the cell</div>
                    </div>
                </div>
            </div>

            <div class="paytable-section">
                <h3>GAME RULES</h3>
                <div class="rules-text">
                    <p>‚Ä¢ <strong>Cluster Pays:</strong> Win by landing 8+ matching symbols adjacent to each other</p>
                    <p>‚Ä¢ <strong>Cascade Feature:</strong> Winning symbols are removed, new symbols drop down</p>
                    <p>‚Ä¢ <strong>Tolerance Meter:</strong> Fills up with each win, triggers special effects</p>
                    <p>‚Ä¢ <strong>Overdose Cycle:</strong> Symbols can become infected, mutated, or crash</p>
                    <p>‚Ä¢ <strong>Bonus Buy:</strong> Click VOMIT button to purchase bonus features</p>
                    <p>‚Ä¢ <strong>Max Win:</strong> 50,000x your bet</p>
                </div>
            </div>

            <button id="close-paytable" class="modal-close-btn">CLOSE</button>
        </div>
    </div>

    <!-- Statistics Panel -->
    <div id="stats-panel" class="stats-panel">
        <div class="stats-header">
            <h3>üìä STATS</h3>
            <button id="toggle-stats" class="stats-toggle">‚ñº</button>
        </div>
        <div id="stats-content" class="stats-content">
            <div class="stat-item">
                <span class="stat-label">Total Spins:</span>
                <span id="stat-spins" class="stat-value">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Total Wagered:</span>
                <span id="stat-wagered" class="stat-value">$0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Total Won:</span>
                <span id="stat-won" class="stat-value">$0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Biggest Win:</span>
                <span id="stat-biggest" class="stat-value">$0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Bonus Triggered:</span>
                <span id="stat-bonus" class="stat-value">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">RTP:</span>
                <span id="stat-rtp" class="stat-value">0%</span>
            </div>
        </div>
    </div>

    <!-- Quick Access Toolbar -->
    <div class="quick-toolbar">
        <button id="toolbar-settings" class="toolbar-btn" title="Settings">
            <span class="toolbar-icon">‚öôÔ∏è</span>
        </button>
        <button id="toolbar-paytable" class="toolbar-btn" title="Paytable">
            <span class="toolbar-icon">üìñ</span>
        </button>
        <button id="toolbar-stats" class="toolbar-btn" title="Statistics">
            <span class="toolbar-icon">üìä</span>
        </button>
        <button id="toolbar-mute" class="toolbar-btn" title="Mute">
            <span class="toolbar-icon">üîä</span>
        </button>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/effects.js"></script>
    <script src="js/features.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/game.js"></script>
    <script src="js/bonus.js"></script>
</body>
</html>
